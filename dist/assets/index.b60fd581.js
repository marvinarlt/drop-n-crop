import{o as e,c as t,r as i,a,b as n,d as s,t as l,e as o,f as r,s as c,F as p,g as d,w as h,h as u,C as g,S as m,N as v,i as f,j as w,k as b,J as k,l as S,m as x}from"./vendor.d5c5b9f5.js";const C={name:"Branding"},B={class:"branding"};C.render=function(i,a,n,s,l,o){return e(),t("span",B,"Drop'n Crop")};var N={state:i({isActive:!1}),activate(){this.state.isActive=!0},deactivate(){this.state.isActive=!1},toggle(){this.state.isActive=!this.state.isActive}};const y={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},I=a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),A=a("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},null,-1);const F={name:"AppSideBarToggler",components:{SettingsIcon:function(i,a){return e(),t("svg",y,[I,A])}},methods:{openSideBar(){N.activate()}}};F.render=function(i,s,l,o,r,c){const p=n("settings-icon");return e(),t("div",{class:"app-side-bar-toggler",onClick:s[1]||(s[1]=(...e)=>c.openSideBar&&c.openSideBar(...e))},[a(p)])};const D={name:"AppTopBar",components:{Branding:C,AppSideBarToggler:F}},V={class:"app-top-bar"};D.render=function(i,s,l,o,r,c){const p=n("branding"),d=n("app-side-bar-toggler");return e(),t("div",V,[a(p),a(d)])};const z={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},M=a("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"},null,-1),O=a("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1);const L={name:"Accordion",components:{ExpandIcon:function(i,a){return e(),t("svg",z,[M,O])}},props:{title:String},data:()=>({isActive:!1}),computed:{content(){return this.$refs.content},mutationObserver(){return new MutationObserver((()=>{if(!this.isActive)return;let e=this.content.firstElementChild,t=null!=e?e:this.content;this.content.style.height=`${t.scrollHeight}px`}))}},mounted(){this.mutationObserver.observe(this.content,{attributes:!0,childList:!0,subtree:!0})},methods:{toggleAccordion(){this.isActive?this.close():this.open()},open(e){this.isActive=!0,this.content.style.height=`${this.content.scrollHeight}px`},close(e){this.isActive=!1,this.content.style.height=null}}},H={class:"icon"},U={class:"accordion-content",ref:"content"};L.render=function(i,r,c,p,d,h){const u=n("expand-icon");return e(),t("div",{class:["accordion",d.isActive?"opened":"closed"]},[a("span",{class:"accordion-title",onClick:r[1]||(r[1]=(...e)=>h.toggleAccordion&&h.toggleAccordion(...e))},[s(l(c.title)+" ",1),a("span",H,[a(u)])]),a("div",U,[o(i.$slots,"default")],512)],2)};var E={storageName:"drop-n-crop",state:i({settings:{options:{compressImages:{label:"Compress images",checked:!0},slugifyFileNames:{label:"Slugify file names",checked:!0},addDashAfterName:{label:"Add dash after breakpoint",checked:!0}},breakpoints:[{name:"tiny",width:480,height:640,active:!0},{name:"small",width:640,height:640,active:!0},{name:"medium",width:760,height:640,active:!0},{name:"large",width:992,height:640,active:!0},{name:"giant",width:1200,height:640,active:!0},{name:"huge",width:1364,height:640,active:!0},{name:"full",width:1520,height:640,active:!0}]}}),loadFromLocalStorage(){let e=localStorage.getItem(this.storageName);if(null!=e){try{e=JSON.parse(e),this.update(e)}catch(t){console.error(t)}this.save()}else this.save()},update(e){this.state.settings=e},save(){localStorage.setItem(this.storageName,JSON.stringify(this.state.settings))}};const T={name:"Checkbox",props:{values:Array,value:String,label:String,id:String},setup:(e,t)=>({check:function(){let i=[...e.values];this.checked?i.splice(i.indexOf(e.value),1):i.push(e.value),t.emit("update:values",i)},checked:r((()=>e.values.includes(e.value)))})},j={class:"checkbox"};T.render=function(i,n,s,o,r,c){return e(),t("div",j,[a("input",{class:"checkbox-input",type:"checkbox",id:s.id,value:s.value,checked:o.checked,onInput:n[1]||(n[1]=(...e)=>o.check&&o.check(...e))},null,40,["id","value","checked"]),a("label",{class:"checkbox-label",for:s.id},l(s.label),9,["for"])])};const $={name:"Options",components:{Checkbox:T},data:()=>({settingsState:E.state.settings,checkedOptions:[]}),mounted(){this.addCheckedOptions()},watch:{checkedOptions(e){let t=this.settingsState.options;for(let i in t){let a=t[i];e.includes(i)?a.checked=!0:a.checked=!1}E.update(this.settingsState),E.save()}},methods:{addCheckedOptions(){let e=this.settingsState.options;for(let t in e){e[t].checked&&this.checkedOptions.push(t)}},slugifyString:e=>c(e,{replacement:"-",lower:!0})}},q={class:"options"};$.render=function(i,a,s,l,o,r){const c=n("checkbox");return e(),t("div",q,[(e(!0),t(p,null,d(o.settingsState.options,((i,n)=>(e(),t(c,{key:n,value:n,label:i.label,id:r.slugifyString(i.label),values:o.checkedOptions,"onUpdate:values":a[1]||(a[1]=e=>o.checkedOptions=e)},null,8,["value","label","id","values"])))),128))])};const R={name:"TextInput",props:{label:String,type:{type:String,default:"text"},placeholder:String,value:[String,Number,Boolean],id:String,required:Boolean},methods:{updateInputValue(e){this.$emit("update:value",e.target.value)}}},P={class:"text-input-container"};R.render=function(i,n,s,o,r,c){return e(),t("div",P,[a("label",{class:"text-input-label",for:s.id},l(s.label),9,["for"]),a("input",{class:"text-input-field",autocomplete:"off",type:s.type,name:s.label,id:s.id,placeholder:s.placeholder,value:s.value,required:s.required,onChange:n[1]||(n[1]=(...e)=>c.updateInputValue&&c.updateInputValue(...e))},null,40,["type","name","id","placeholder","value","required"])])};const _={name:"Button",props:{type:String,label:String,className:String,link:String,title:String}};_.render=function(i,a,n,s,o,r){return"link"==n.type?(e(),t("a",{key:0,class:["button",n.className],href:n.link,title:n.title},l(n.label),11,["href","title"])):(e(),t("button",{key:1,class:["button",n.className],type:n.type},l(n.label),11,["type"]))};const W={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},J=a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),G=a("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"},null,-1);const K={name:"Breakpoints",components:{TextInput:R,CustomButton:_,DeleteIcon:function(i,a){return e(),t("svg",W,[J,G])}},data:()=>({settingsState:E.state.settings,nameValue:"",widthValue:""}),methods:{addBreakpoint(){if(""==this.nameValue||""==this.widthValue||this.isDuplicate(this.nameValue))return;let e=this.createBreakpoint(this.nameValue,this.widthValue);this.settingsState.breakpoints.push(e),this.updateSettings(),this.clearInputs()},isDuplicate(e){for(let t of this.settingsState.breakpoints)if(t.name==e)return!0;return!1},createBreakpoint:(e,t)=>({name:e,width:parseInt(t),height:640,active:!0}),clearInputs(){this.nameValue="",this.widthValue=""},deleteBreakpoint(e){this.settingsState.breakpoints.splice(e,1),this.updateSettings()},updateSettings(){E.update(this.settingsState),E.save()}}},Q={class:"breakpoints"},X=a("tr",null,[a("th",null,"Name"),a("th",null,"Width (px)")],-1);K.render=function(i,o,r,c,u,g){const m=n("text-input"),v=n("custom-button"),f=n("delete-icon");return e(),t("div",Q,[a("form",{class:"breakpoints-form",onSubmit:o[3]||(o[3]=h(((...e)=>g.addBreakpoint&&g.addBreakpoint(...e)),["prevent"]))},[a(m,{type:"text",label:"Name",placeholder:"large",id:"name",required:"",value:u.nameValue,"onUpdate:value":o[1]||(o[1]=e=>u.nameValue=e)},null,8,["value"]),a(m,{type:"number",label:"Width in px",placeholder:"992",id:"width-in-px",required:"",value:u.widthValue,"onUpdate:value":o[2]||(o[2]=e=>u.widthValue=e)},null,8,["value"]),a(v,{type:"submit",label:"Add Breakpoint",class:"full-width"})],32),a("table",null,[X,(e(!0),t(p,null,d(u.settingsState.breakpoints,((i,n)=>(e(),t("tr",{key:n},[a("td",null,l(i.name),1),a("td",null,[s(l(i.width)+" ",1),a("span",{class:"delete",onClick:e=>g.deleteBreakpoint(n)},[a(f)],8,["onClick"])])])))),128))])])};const Y={name:"ImageSizes",components:{Checkbox:T,TextInput:R},data:()=>({settingsState:E.state.settings,checkedBreakpoints:[],inputValues:[]}),created(){this.setCheckedBreakpoints()},watch:{checkedBreakpoints(e){this.updateBreakpointActiveState(e)},inputValues(e){this.updateBreakpointHeight(e)}},methods:{setCheckedBreakpoints(){let e=this.settingsState.breakpoints.filter((e=>e.active));for(let t of e)this.checkedBreakpoints.push(t.name)},updateBreakpointActiveState(e){for(let t of this.settingsState.breakpoints)e.includes(t.name)?t.active=!0:t.active=!1;E.update(this.settingsState),E.save()},updateBreakpointHeight(e,t){let i=parseInt(t.target.value);NaN!=typeof i&&(this.settingsState.breakpoints[e].height=i,E.update(this.settingsState),E.save())}}},Z={class:"image-sizes"},ee={class:"size-input-container"};Y.render=function(i,s,o,r,c,h){const u=n("checkbox");return e(),t("div",Z,[(e(!0),t(p,null,d(c.settingsState.breakpoints,((i,n)=>(e(),t("div",{class:"image-size-item",key:n},[a(u,{value:i.name,label:i.name,id:i.name,checked:i.active,values:c.checkedBreakpoints,"onUpdate:values":s[1]||(s[1]=e=>c.checkedBreakpoints=e)},null,8,["value","label","id","checked","values"]),a("div",ee,[a("label",{class:"size-input-label",for:i.name+"-height"},l(i.width)+" x",9,["for"]),a("input",{class:"size-input-field",type:"number",placeholder:"640",name:i.name,id:i.name+"-height",value:i.height,required:"",onChange:e=>h.updateBreakpointHeight(n,e)},null,40,["name","id","value","onChange"])])])))),128))])};const te={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},ie=a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),ae=a("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},null,-1);const ne={name:"AppSideBar",components:{Accordion:L,Options:$,Breakpoints:K,ImageSizes:Y,CloseIcon:function(i,a){return e(),t("svg",te,[ie,ae])}},data:()=>({sideBarState:N.state}),methods:{closeSideBar(){N.deactivate()}}},se={class:"side-bar-header"},le=a("span",{class:"side-bar-label"},"Settings",-1),oe={class:"side-bar-content"};ne.render=function(i,s,l,o,r,c){const p=n("close-icon"),d=n("options"),h=n("accordion"),g=n("breakpoints"),m=n("image-sizes");return e(),t("div",{class:["app-side-bar",r.sideBarState.isActive?"active":""]},[a("div",se,[le,a("div",{class:"side-bar-close",onClick:s[1]||(s[1]=(...e)=>c.closeSideBar&&c.closeSideBar(...e))},[a(p)])]),a("div",oe,[a(h,{title:"Options"},{default:u((()=>[a(d)])),_:1}),a(h,{title:"Breakpoints"},{default:u((()=>[a(g)])),_:1}),a(h,{title:"Image sizes"},{default:u((()=>[a(m)])),_:1})])],2)};var re={state:i({uploadedFiles:[],croppedImages:[]}),addUploadedFiles(e){this.state.uploadedFiles.push(...e)},addCroppedImage(e,t){null==this.state.croppedImages[e]&&(this.state.croppedImages[e]=[]),this.state.croppedImages[e].push(t)},resetCroppedImages(){this.state.croppedImages=[]},saveCroppedCanvas(e,t,i={}){let a=1,n="unknown";i.compress&&(a=.85),i.fileName&&(n=i.fileName),e.toBlob((i=>{this.addCroppedImage(t,{name:n,width:e.width,height:e.height,blob:i})}),"image/jpeg",a)}},ce={state:i({isActive:!1}),toggle(){this.state.isActive=!this.state.isActive},open(){this.state.isActive=!0},close(){this.state.isActive=!1}};const pe={name:"CroppingItem",props:{breakpoint:Object,fileSrc:String,fileName:String,count:Number,index:Number},data:()=>({settingsState:E.state.settings,downloadModalState:ce.state,cropper:{},preloadedFileSrc:""}),created(){this.preloadFileSrc()},computed:{image(){return this.$refs.image},imageFileName(){return this.settingsState.options.addDashAfterName.checked?this.breakpoint.name+"-"+this.fileName:this.breakpoint.name+" "+this.fileName},modalIsActive(){return this.downloadModalState.isActive}},watch:{modalIsActive(e){e&&this.saveCroppedImageData()}},methods:{preloadFileSrc(){let e=new Image;e.src=this.fileSrc,e.onload=()=>{this.image.src=e.src}},initializeCropper(){this.cropper=new g(this.image,{viewMode:3,aspectRatio:this.breakpoint.width/this.breakpoint.height,dragMode:"move",rotatable:!1,zoomable:!1,toggleDragModeOnDblclick:!1,autoCropArea:1})},saveCroppedImageData(){let e=this.cropper.getCroppedCanvas({width:this.breakpoint.width,height:this.breakpoint.height});re.saveCroppedCanvas(e,this.count,{fileName:this.imageFileName,compress:this.settingsState.options.compressImages.checked})}}},de={class:"cropping-item"},he={class:"cropper-container"},ue={class:"cropping-label"},ge={class:"cropping-name"},me={class:"cropping-size"};pe.render=function(i,n,s,o,r,c){return e(),t("div",de,[a("div",he,[a("img",{src:r.preloadedFileSrc,alt:s.breakpoint.name,ref:"image",onLoad:n[1]||(n[1]=(...e)=>c.initializeCropper&&c.initializeCropper(...e))},null,40,["src","alt"])]),a("div",ue,[a("span",ge,l(s.breakpoint.name),1),a("span",me,l(s.breakpoint.width)+" x "+l(s.breakpoint.height),1)])])};const ve={xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},fe=a("rect",{fill:"none",height:"24",width:"24"},null,-1),we=a("path",{d:"M15,5l-1.41,1.41L18.17,11H2V13h16.17l-4.59,4.59L15,19l7-7L15,5z"},null,-1);function be(i,a){return e(),t("svg",ve,[fe,we])}m.use([v]);const ke={name:"CroppingElement",components:{TextInput:R,CroppingItem:pe,ArrowIcon:be,Swiper:f,SwiperSlide:w},props:{file:File},data:()=>({settingsState:E.state.settings,fileName:"",swiperBreakpoints:{640:{slidesPerView:2},992:{slidesPerView:3}},swiperNavigation:{prevEl:".navigation-prev",nextEl:".navigation-next"}}),mounted(){this.fileName=this.getInitialProcessedFileName()},computed:{fileSrc(){return URL.createObjectURL(this.file)},slugifiedFileName(){return this.slugifyFileName(this.fileName)},slugifyFileNamesOption(){return this.settingsState.options.slugifyFileNames.checked},count(){return this.$.vnode.key},displayCount(){let e=this.count+1;return e<10?`0${e}`:e}},watch:{fileName(e){this.fileName=this.processFileName(e)},slugifyFileNamesOption(){this.fileName=this.processFileName(this.fileName)}},methods:{getInitialProcessedFileName(){let e=this.file.name.split(".").slice(0,-1).join(".");return this.processFileName(e)},processFileName(e){return this.settingsState.options.slugifyFileNames.checked?this.slugifyFileName(e):e},slugifyFileName:e=>c(e,{replacement:"-",lower:!0}),toBase64(e){let t=new FileReader;t.readAsDataURL(e),t.onload=()=>this.fileSrc=t.result,t.onerror=e=>console.error(e)}}},Se={class:"cropping-element"},xe={class:"element-count"},Ce={class:"cropping-input"},Be={class:"swiper-controls"},Ne={class:"navigation-prev"},ye={class:"navigation-next"};ke.render=function(i,s,o,r,c,h){const g=n("text-input"),m=n("arrow-icon"),v=n("cropping-item"),f=n("swiper-slide"),w=n("swiper");return e(),t("div",Se,[a("span",xe,l(h.displayCount),1),a("div",Ce,[a(g,{label:"Name",type:"text",placeholder:"my-beautiful-image",id:h.slugifiedFileName,required:"",value:c.fileName,"onUpdate:value":s[1]||(s[1]=e=>c.fileName=e)},null,8,["id","value"])]),a(w,{"slides-per-view":1,"space-between":32,breakpoints:c.swiperBreakpoints,"allow-touch-move":!1,navigation:c.swiperNavigation},{default:u((()=>[a("div",Be,[a("div",Ne,[a(m)]),a("div",ye,[a(m)])]),(e(!0),t(p,null,d(c.settingsState.breakpoints,((i,n)=>(e(),t(p,{key:n},[i.active?(e(),t(f,{key:0},{default:u((()=>[a(v,{breakpoint:i,fileSrc:h.fileSrc,fileName:c.fileName,count:h.count,index:n},null,8,["breakpoint","fileSrc","fileName","count","index"])])),_:2},1024)):b("",!0)],64)))),128))])),_:1},8,["breakpoints","navigation"])])};const Ie={xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},Ae=a("g",null,[a("rect",{fill:"none",height:"24",width:"24"})],-1),Fe=a("g",null,[a("path",{d:"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M7,9l1.41,1.41L11,7.83V16h2V7.83l2.59,2.58L17,9l-5-5L7,9z"})],-1);const De={name:"DropArea",components:{FileUploadIcon:function(i,a){return e(),t("svg",Ie,[Ae,Fe])}},data:()=>({isDraggingOver:!1}),methods:{uploadFiles(e){e&&re.addUploadedFiles(e)},uploadDroppedFiles(e){this.uploadFiles(e.dataTransfer.files),this.isDraggingOver=!1},uploadFilesFromInput(e){this.uploadFiles(e.target.files)},onDragEnter(){this.isDraggingOver=!0},onDragLeave(){this.isDraggingOver=!1},openFileUploadWindow(){this.$refs.fileUpload.click()}}},Ve={class:"drop-area-label"},ze=s(" Drag'n Drop images here ");De.render=function(i,s,l,o,r,c){const d=n("file-upload-icon");return e(),t(p,null,[a("input",{class:"hidden",type:"file",name:"File upload",ref:"fileUpload",accept:"image/jpg, image/jpeg, image/png",multiple:"",onChange:s[1]||(s[1]=(...e)=>c.uploadFilesFromInput&&c.uploadFilesFromInput(...e))},null,544),a("div",{class:["drop-area",r.isDraggingOver?"dragging-over":""],onDrop:s[2]||(s[2]=h(((...e)=>c.uploadDroppedFiles&&c.uploadDroppedFiles(...e)),["prevent"])),onDragover:s[3]||(s[3]=h((()=>{}),["prevent"])),onDragenter:s[4]||(s[4]=(...e)=>c.onDragEnter&&c.onDragEnter(...e)),onDragleave:s[5]||(s[5]=(...e)=>c.onDragLeave&&c.onDragLeave(...e)),onClick:s[6]||(s[6]=(...e)=>c.openFileUploadWindow&&c.openFileUploadWindow(...e))},[a("span",Ve,[a(d),ze])],34)],64)};const Me={name:"CroppingContainer",components:{CroppingElement:ke,DropArea:De},data:()=>({files:re.state.uploadedFiles})},Oe={class:"cropping-container"};Me.render=function(i,s,l,o,r,c){const h=n("cropping-element"),u=n("drop-area");return e(),t("div",Oe,[(e(!0),t(p,null,d(r.files,((i,a)=>(e(),t(h,{key:a,file:i},null,8,["file"])))),128)),a(u)])};const Le={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},He=a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ue=a("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"},null,-1);const Ee={name:"CropButton",components:{CropIcon:function(i,a){return e(),t("svg",Le,[He,Ue])}},data:()=>({sideBarState:N.state}),methods:{onClick(){ce.open()}}},Te=a("span",{class:"crop-button-label"},"Crop images",-1);Ee.render=function(i,s,l,o,r,c){const p=n("crop-icon");return e(),t("div",{class:["crop-button",r.sideBarState.isActive?"side-bar-opened":""]},[a("button",{class:"button",onClick:s[1]||(s[1]=(...e)=>c.onClick&&c.onClick(...e))},[Te,a(p)])],2)};const je={name:"DownloadItem",props:{src:String,name:String,width:Number,height:Number}},$e={class:"download-item"},qe={class:"download-image-container"},Re={class:"download-label"},Pe={class:"download-name"},_e={class:"download-size"};je.render=function(i,n,s,o,r,c){return e(),t("div",$e,[a("div",qe,[a("img",{src:s.src,alt:s.name},null,8,["src","alt"])]),a("div",Re,[a("span",Pe,l(s.name),1),a("span",_e,l(s.width)+" x "+l(s.height),1)])])};m.use([v]);const We={name:"DownloadElement",components:{DownloadItem:je,ArrowIcon:be,Swiper:f,SwiperSlide:w},props:{images:Array},data:()=>({swiperBreakpoints:{640:{slidesPerView:2},992:{slidesPerView:3}},swiperNavigation:{prevEl:".navigation-prev",nextEl:".navigation-next"}}),methods:{getSrcFromBlob:e=>URL.createObjectURL(e)}},Je={class:"download-element"},Ge={class:"swiper-controls"},Ke={class:"navigation-prev"},Qe={class:"navigation-next"};We.render=function(i,s,l,o,r,c){const h=n("arrow-icon"),g=n("download-item"),m=n("swiper-slide"),v=n("swiper");return e(),t("div",Je,[a(v,{"slides-per-view":1,"space-between":32,breakpoints:r.swiperBreakpoints,"free-mode":!0,navigation:r.swiperNavigation},{default:u((()=>[a("div",Ge,[a("div",Ke,[a(h)]),a("div",Qe,[a(h)])]),(e(!0),t(p,null,d(l.images,((i,n)=>(e(),t(m,{key:n},{default:u((()=>[a(g,{src:c.getSrcFromBlob(i.blob),name:i.name,width:i.width,height:i.height},null,8,["src","name","width","height"])])),_:2},1024)))),128))])),_:1},8,["breakpoints","navigation"])])};const Xe={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},Ye=a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ze=a("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1);const et={name:"DownloadModal",components:{CustomButton:_,RefreshIcon:function(i,a){return e(),t("svg",Xe,[Ye,Ze])},DownloadElement:We},data:()=>({downloadModalState:ce.state,croppingState:re.state,downloadText:"Download"}),computed:{filteredCroppedImages(){let e=this.croppingState.croppedImages;for(let t in e){let i=e[t].filter((e=>null!=e)).sort(((e,t)=>e.width-t.width));e[t]=i}return e}},methods:{closeModal(){ce.close(),re.resetCroppedImages()},onDownloadClick(){this.saveImages()},saveImages(){let e=this.$refs.loader,t=new k,i=this.croppingState.croppedImages;this.downloadText="Downloading",e.classList.add("show");for(let a of i)for(let e of a){let i=e.name+".jpg";t.file(i,e.blob)}t.generateAsync({type:"blob"}).then((t=>{e.classList.remove("show"),this.downloadText="Download",S.exports.saveAs(t,"dropncrop.zip")}))}}},tt={key:0,class:"download-modal"},it={class:"download-modal-wrapper"},at=a("div",{class:"modal-header"},[a("span",{class:"modal-headline"},"Preview")],-1),nt={class:"modal-content"},st={class:"modal-buttons"};et.render=function(i,o,r,c,h,u){const g=n("download-element"),m=n("custom-button"),v=n("refresh-icon");return h.downloadModalState.isActive?(e(),t("div",tt,[a("div",it,[at,a("div",nt,[(e(!0),t(p,null,d(u.filteredCroppedImages,((i,a)=>(e(),t(g,{key:a,images:i},null,8,["images"])))),128))]),a("div",st,[a(m,{type:"button",label:"Cancel",class:"secondary",onClick:u.closeModal},null,8,["onClick"]),a("button",{class:"button download",type:"button",onClick:o[1]||(o[1]=(...e)=>u.onDownloadClick&&u.onDownloadClick(...e))},[s(l(h.downloadText)+" ",1),a(v,{ref:"loader"},null,512)])])])])):b("",!0)};const lt={name:"AppMain",components:{CroppingContainer:Me,CropButton:Ee,DownloadModal:et},data:()=>({sideBarState:N.state})};lt.render=function(i,s,l,o,r,c){const p=n("cropping-container"),d=n("crop-button"),h=n("download-modal");return e(),t("main",{class:r.sideBarState.isActive?"app-main side-bar-opened":"app-main"},[a(p),a(d),a(h)],2)};const ot={name:"App",components:{AppTopBar:D,AppSideBar:ne,AppMain:lt},created(){E.loadFromLocalStorage()}};ot.render=function(i,s,l,o,r,c){const d=n("app-main"),h=n("app-top-bar"),u=n("app-side-bar");return e(),t(p,null,[a(d),a(h),a(u)],64)};x(ot).mount("#app");
