import{o as e,c as t,r as a,a as i,b as n,d as s,t as o,e as l,f as r,s as c,F as p,g as d,w as h,h as u,C as g,S as m,N as v,i as w,j as f,k as b,l as k,m as S,n as x}from"./vendor.9272928c.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const i=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const o=new URL(e,i);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){s(new Error(`Failed to import: ${e}`)),n(r)},onload(){a(self[t].moduleMap[o]),n(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("/assets/");const B={name:"Branding"},C={class:"branding"};B.render=function(a,i,n,s,o,l){return e(),t("span",C,"Drop'n Crop")};var y={state:a({isActive:!1}),activate(){this.state.isActive=!0},deactivate(){this.state.isActive=!1},toggle(){this.state.isActive=!this.state.isActive}};const I={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},N=i("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),A=i("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},null,-1);const F={name:"AppSideBarToggler",components:{SettingsIcon:function(a,i){return e(),t("svg",I,[N,A])}},methods:{openSideBar(){y.activate()}}};F.render=function(a,s,o,l,r,c){const p=n("settings-icon");return e(),t("div",{class:"app-side-bar-toggler",onClick:s[1]||(s[1]=(...e)=>c.openSideBar&&c.openSideBar(...e))},[i(p)])};const D={name:"AppTopBar",components:{Branding:B,AppSideBarToggler:F}},M={class:"app-top-bar"};D.render=function(a,s,o,l,r,c){const p=n("branding"),d=n("app-side-bar-toggler");return e(),t("div",M,[i(p),i(d)])};const V={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},z=i("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"},null,-1),L=i("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1);const O={name:"Accordion",components:{ExpandIcon:function(a,i){return e(),t("svg",V,[z,L])}},props:{title:String},data:()=>({isActive:!1}),computed:{content(){return this.$refs.content},mutationObserver(){return new MutationObserver((()=>{if(!this.isActive)return;let e=this.content.firstElementChild,t=null!=e?e:this.content;this.content.style.height=`${t.scrollHeight}px`}))}},mounted(){this.mutationObserver.observe(this.content,{attributes:!0,childList:!0,subtree:!0})},methods:{toggleAccordion(){this.isActive?this.close():this.open()},open(e){this.isActive=!0,this.content.style.height=`${this.content.scrollHeight}px`},close(e){this.isActive=!1,this.content.style.height=null}}},U={class:"icon"},H={class:"accordion-content",ref:"content"};O.render=function(a,r,c,p,d,h){const u=n("expand-icon");return e(),t("div",{class:["accordion",d.isActive?"opened":"closed"]},[i("span",{class:"accordion-title",onClick:r[1]||(r[1]=(...e)=>h.toggleAccordion&&h.toggleAccordion(...e))},[s(o(c.title)+" ",1),i("span",U,[i(u)])]),i("div",H,[l(a.$slots,"default")],512)],2)};var R={storageName:"drop-n-crop",state:a({settings:{options:{compressImages:{label:"Compress images",checked:!0},slugifyFileNames:{label:"Slugify file names",checked:!0},addDashAfterName:{label:"Add dash after breakpoint",checked:!0}},breakpoints:[{name:"tiny",width:480,height:640,active:!0},{name:"small",width:640,height:640,active:!0},{name:"medium",width:760,height:640,active:!0},{name:"large",width:992,height:640,active:!0},{name:"giant",width:1200,height:640,active:!0},{name:"huge",width:1660,height:640,active:!0}]}}),loadFromLocalStorage(){let e=localStorage.getItem(this.storageName);if(null!=e){try{e=JSON.parse(e),this.update(e)}catch(t){console.error(t)}this.save()}else this.save()},update(e){this.state.settings=e},save(){localStorage.setItem(this.storageName,JSON.stringify(this.state.settings))}};const j={name:"Checkbox",props:{values:Array,value:String,label:String,id:String},setup:(e,t)=>({check:function(){let a=[...e.values];this.checked?a.splice(a.indexOf(e.value),1):a.push(e.value),t.emit("update:values",a)},checked:r((()=>e.values.includes(e.value)))})},E={class:"checkbox"};j.render=function(a,n,s,l,r,c){return e(),t("div",E,[i("input",{class:"checkbox-input",type:"checkbox",id:s.id,value:s.value,checked:l.checked,onInput:n[1]||(n[1]=(...e)=>l.check&&l.check(...e))},null,40,["id","value","checked"]),i("label",{class:"checkbox-label",for:s.id},o(s.label),9,["for"])])};const T={name:"Options",components:{Checkbox:j},data:()=>({settingsState:R.state.settings,checkedOptions:[]}),mounted(){this.addCheckedOptions()},watch:{checkedOptions(e){let t=this.settingsState.options;for(let a in t){let i=t[a];e.includes(a)?i.checked=!0:i.checked=!1}R.update(this.settingsState),R.save()}},methods:{addCheckedOptions(){let e=this.settingsState.options;for(let t in e){e[t].checked&&this.checkedOptions.push(t)}},slugifyString:e=>c(e,{replacement:"-",lower:!0})}},$={class:"options"};T.render=function(a,i,s,o,l,r){const c=n("checkbox");return e(),t("div",$,[(e(!0),t(p,null,d(l.settingsState.options,((a,n)=>(e(),t(c,{key:n,value:n,label:a.label,id:r.slugifyString(a.label),values:l.checkedOptions,"onUpdate:values":i[1]||(i[1]=e=>l.checkedOptions=e)},null,8,["value","label","id","values"])))),128))])};const _={name:"TextInput",props:{label:String,type:{type:String,default:"text"},placeholder:String,value:[String,Number,Boolean],id:String,required:Boolean},methods:{updateInputValue(e){this.$emit("update:value",e.target.value)}}},q={class:"text-input-container"};_.render=function(a,n,s,l,r,c){return e(),t("div",q,[i("label",{class:"text-input-label",for:s.id},o(s.label),9,["for"]),i("input",{class:"text-input-field",autocomplete:"off",type:s.type,name:s.label,id:s.id,placeholder:s.placeholder,value:s.value,required:s.required,onChange:n[1]||(n[1]=(...e)=>c.updateInputValue&&c.updateInputValue(...e))},null,40,["type","name","id","placeholder","value","required"])])};const P={name:"Button",props:{type:String,label:String,className:String,link:String,title:String}};P.render=function(a,i,n,s,l,r){return"link"==n.type?(e(),t("a",{key:0,class:["button",n.className],href:n.link,title:n.title},o(n.label),11,["href","title"])):(e(),t("button",{key:1,class:["button",n.className],type:n.type},o(n.label),11,["type"]))};const W={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},J=i("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),G=i("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"},null,-1);const K={name:"Breakpoints",components:{TextInput:_,CustomButton:P,DeleteIcon:function(a,i){return e(),t("svg",W,[J,G])}},data:()=>({settingsState:R.state.settings,nameValue:"",widthValue:""}),methods:{addBreakpoint(){if(""==this.nameValue||""==this.widthValue||this.isDuplicate(this.nameValue))return;let e=this.createBreakpoint(this.nameValue,this.widthValue);this.settingsState.breakpoints.push(e),this.updateSettings(),this.clearInputs()},isDuplicate(e){for(let t of this.settingsState.breakpoints)if(t.name==e)return!0;return!1},createBreakpoint:(e,t)=>({name:e,width:parseInt(t),height:640,active:!0}),clearInputs(){this.nameValue="",this.widthValue=""},deleteBreakpoint(e){this.settingsState.breakpoints.splice(e,1),this.updateSettings()},updateSettings(){R.update(this.settingsState),R.save()}}},Q={class:"breakpoints"},X=i("tr",null,[i("th",null,"Name"),i("th",null,"Width (px)")],-1);K.render=function(a,l,r,c,u,g){const m=n("text-input"),v=n("custom-button"),w=n("delete-icon");return e(),t("div",Q,[i("form",{class:"breakpoints-form",onSubmit:l[3]||(l[3]=h(((...e)=>g.addBreakpoint&&g.addBreakpoint(...e)),["prevent"]))},[i(m,{type:"text",label:"Name",placeholder:"large",id:"name",required:"",value:u.nameValue,"onUpdate:value":l[1]||(l[1]=e=>u.nameValue=e)},null,8,["value"]),i(m,{type:"number",label:"Width in px",placeholder:"992",id:"width-in-px",required:"",value:u.widthValue,"onUpdate:value":l[2]||(l[2]=e=>u.widthValue=e)},null,8,["value"]),i(v,{type:"submit",label:"Add Breakpoint",class:"full-width"})],32),i("table",null,[X,(e(!0),t(p,null,d(u.settingsState.breakpoints,((a,n)=>(e(),t("tr",{key:n},[i("td",null,o(a.name),1),i("td",null,[s(o(a.width)+" ",1),i("span",{class:"delete",onClick:e=>g.deleteBreakpoint(n)},[i(w)],8,["onClick"])])])))),128))])])};const Y={name:"ImageSizes",components:{Checkbox:j,TextInput:_},data:()=>({settingsState:R.state.settings,checkedBreakpoints:[],inputValues:[]}),created(){this.setCheckedBreakpoints()},watch:{checkedBreakpoints(e){this.updateBreakpointActiveState(e)},inputValues(e){this.updateBreakpointHeight(e)}},methods:{setCheckedBreakpoints(){let e=this.settingsState.breakpoints.filter((e=>e.active));for(let t of e)this.checkedBreakpoints.push(t.name)},updateBreakpointActiveState(e){for(let t of this.settingsState.breakpoints)e.includes(t.name)?t.active=!0:t.active=!1;R.update(this.settingsState),R.save()},updateBreakpointHeight(e,t){let a=parseInt(t.target.value);NaN!=typeof a&&(this.settingsState.breakpoints[e].height=a,R.update(this.settingsState),R.save())}}},Z={class:"image-sizes"},ee={class:"size-input-container"};Y.render=function(a,s,l,r,c,h){const u=n("checkbox");return e(),t("div",Z,[(e(!0),t(p,null,d(c.settingsState.breakpoints,((a,n)=>(e(),t("div",{class:"image-size-item",key:n},[i(u,{value:a.name,label:a.name,id:a.name,checked:a.active,values:c.checkedBreakpoints,"onUpdate:values":s[1]||(s[1]=e=>c.checkedBreakpoints=e)},null,8,["value","label","id","checked","values"]),i("div",ee,[i("label",{class:"size-input-label",for:a.name+"-height"},o(a.width)+" x",9,["for"]),i("input",{class:"size-input-field",type:"number",placeholder:"640",name:a.name,id:a.name+"-height",value:a.height,required:"",onChange:e=>h.updateBreakpointHeight(n,e)},null,40,["name","id","value","onChange"])])])))),128))])};const te={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},ae=i("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),ie=i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},null,-1);const ne={name:"AppSideBar",components:{Accordion:O,Options:T,Breakpoints:K,ImageSizes:Y,CloseIcon:function(a,i){return e(),t("svg",te,[ae,ie])}},data:()=>({sideBarState:y.state}),methods:{closeSideBar(){y.deactivate()}}},se={class:"side-bar-header"},oe=i("span",{class:"side-bar-label"},"Settings",-1),le={class:"side-bar-content"};ne.render=function(a,s,o,l,r,c){const p=n("close-icon"),d=n("options"),h=n("accordion"),g=n("breakpoints"),m=n("image-sizes");return e(),t("div",{class:["app-side-bar",r.sideBarState.isActive?"active":""]},[i("div",se,[oe,i("div",{class:"side-bar-close",onClick:s[1]||(s[1]=(...e)=>c.closeSideBar&&c.closeSideBar(...e))},[i(p)])]),i("div",le,[i(h,{title:"Options"},{default:u((()=>[i(d)])),_:1}),i(h,{title:"Breakpoints"},{default:u((()=>[i(g)])),_:1}),i(h,{title:"Image sizes"},{default:u((()=>[i(m)])),_:1})])],2)};var re={state:a({uploadedFiles:[],croppedImages:[]}),addUploadedFiles(e){this.state.uploadedFiles.push(...e)},addCroppedImages(e){this.state.croppedImages.push(...e)},addCroppedImage(e,t){null==this.state.croppedImages[e]&&(this.state.croppedImages[e]=[]),this.state.croppedImages[e].push(t)},resetCroppedImages(){this.state.croppedImages=[]}},ce={state:a({isActive:!1}),toggle(){this.state.isActive=!this.state.isActive},open(){this.state.isActive=!0},close(){this.state.isActive=!1}};const pe={name:"CroppingItem",props:{breakpoint:Object,fileSrc:String,fileName:String,count:Number,index:Number},data:()=>({settingsState:R.state.settings,downloadModalState:ce.state,cropper:{},preloadedFileSrc:""}),created(){this.preloadFileSrc()},computed:{image(){return this.$refs.image},imageFileName(){return this.settingsState.options.addDashAfterName.checked?this.breakpoint.name+"-"+this.fileName:this.breakpoint.name+" "+this.fileName},modalIsActive(){return this.downloadModalState.isActive}},watch:{modalIsActive(e){e&&this.saveCroppedImageData()}},methods:{preloadFileSrc(){let e=new Image;e.src=this.fileSrc,e.onload=()=>{this.image.src=e.src}},initializeCropper(){this.cropper=new g(this.image,{viewMode:3,aspectRatio:this.breakpoint.width/this.breakpoint.height,dragMode:"move",rotatable:!1,zoomable:!1,toggleDragModeOnDblclick:!1,autoCropArea:1})},saveCroppedImageData(){let e=this.cropper.getCroppedCanvas({width:this.breakpoint.width,height:this.breakpoint.height}),t=this.settingsState.options.compressImages.checked?.85:1,a=e.toDataURL("image/jpeg",t),i=this.getBase64FromDataURL(a),n=this.base64ToBlob(i,"image/jpeg");re.addCroppedImage(this.count,{name:this.imageFileName,width:this.breakpoint.width,height:this.breakpoint.height,blob:n})},base64ToBlob(e,t="",a=512){let i=atob(e),n=[];for(let s=0;s<i.length;s+=a){let e=i.slice(s,s+a),t=new Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);let o=new Uint8Array(t);n.push(o)}return new Blob(n,{type:t})},getBase64FromDataURL:e=>e.replace(/^data:image\/(png|jpg|jpeg);base64,/,"")}},de={class:"cropping-item"},he={class:"cropper-container"},ue={class:"cropping-label"},ge={class:"cropping-name"},me={class:"cropping-size"};pe.render=function(a,n,s,l,r,c){return e(),t("div",de,[i("div",he,[i("img",{src:r.preloadedFileSrc,alt:s.breakpoint.name,ref:"image",onLoad:n[1]||(n[1]=(...e)=>c.initializeCropper&&c.initializeCropper(...e))},null,40,["src","alt"])]),i("div",ue,[i("span",ge,o(s.breakpoint.name),1),i("span",me,o(s.breakpoint.width)+" x "+o(s.breakpoint.height),1)])])};const ve={xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},we=i("rect",{fill:"none",height:"24",width:"24"},null,-1),fe=i("path",{d:"M15,5l-1.41,1.41L18.17,11H2V13h16.17l-4.59,4.59L15,19l7-7L15,5z"},null,-1);function be(a,i){return e(),t("svg",ve,[we,fe])}m.use([v]);const ke={name:"CroppingElement",components:{TextInput:_,CroppingItem:pe,ArrowIcon:be,Swiper:w,SwiperSlide:f},props:{file:File},data:()=>({settingsState:R.state.settings,fileName:"",swiperBreakpoints:{640:{slidesPerView:2},992:{slidesPerView:3}},swiperNavigation:{prevEl:".navigation-prev",nextEl:".navigation-next"}}),mounted(){this.fileName=this.getInitialProcessedFileName()},computed:{fileSrc(){return URL.createObjectURL(this.file)},slugifiedFileName(){return this.slugifyFileName(this.fileName)},slugifyFileNamesOption(){return this.settingsState.options.slugifyFileNames.checked},count(){return this.$.vnode.key},displayCount(){let e=this.count+1;return e<10?`0${e}`:e}},watch:{fileName(e){this.fileName=this.processFileName(e)},slugifyFileNamesOption(){this.fileName=this.processFileName(this.fileName)}},methods:{getInitialProcessedFileName(){let e=this.file.name.split(".").slice(0,-1).join(".");return this.processFileName(e)},processFileName(e){return this.settingsState.options.slugifyFileNames.checked?this.slugifyFileName(e):e},slugifyFileName:e=>c(e,{replacement:"-",lower:!0}),toBase64(e){let t=new FileReader;t.readAsDataURL(e),t.onload=()=>this.fileSrc=t.result,t.onerror=e=>console.error(e)}}},Se={class:"cropping-element"},xe={class:"element-count"},Be={class:"cropping-input"},Ce={class:"swiper-controls"},ye={class:"navigation-prev"},Ie={class:"navigation-next"};ke.render=function(a,s,l,r,c,h){const g=n("text-input"),m=n("arrow-icon"),v=n("cropping-item"),w=n("swiper-slide"),f=n("swiper");return e(),t("div",Se,[i("span",xe,o(h.displayCount),1),i("div",Be,[i(g,{label:"Name",type:"text",placeholder:"my-beautiful-image",id:h.slugifiedFileName,required:"",value:c.fileName,"onUpdate:value":s[1]||(s[1]=e=>c.fileName=e)},null,8,["id","value"])]),i(f,{"slides-per-view":1,"space-between":32,breakpoints:c.swiperBreakpoints,"allow-touch-move":!1,navigation:c.swiperNavigation},{default:u((()=>[i("div",Ce,[i("div",ye,[i(m)]),i("div",Ie,[i(m)])]),(e(!0),t(p,null,d(c.settingsState.breakpoints,((a,n)=>(e(),t(p,{key:n},[a.active?(e(),t(w,{key:0},{default:u((()=>[i(v,{breakpoint:a,fileSrc:h.fileSrc,fileName:c.fileName,count:h.count,index:n},null,8,["breakpoint","fileSrc","fileName","count","index"])])),_:2},1024)):b("",!0)],64)))),128))])),_:1},8,["breakpoints","navigation"])])};const Ne={xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},Ae=i("g",null,[i("rect",{fill:"none",height:"24",width:"24"})],-1),Fe=i("g",null,[i("path",{d:"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M7,9l1.41,1.41L11,7.83V16h2V7.83l2.59,2.58L17,9l-5-5L7,9z"})],-1);const De={name:"DropArea",components:{FileUploadIcon:function(a,i){return e(),t("svg",Ne,[Ae,Fe])}},data:()=>({isDraggingOver:!1}),methods:{uploadFiles(e){e&&re.addUploadedFiles(e)},uploadDroppedFiles(e){this.uploadFiles(e.dataTransfer.files),this.isDraggingOver=!1},uploadFilesFromInput(e){this.uploadFiles(e.target.files)},onDragEnter(e){this.isDraggingOver=!0},onDragLeave(e){this.isDraggingOver=!1},openFileUploadWindow(){this.$refs.fileUpload.click()}}},Me={class:"drop-area-label"},Ve=s(" Drag'n Drop images here ");De.render=function(a,s,o,l,r,c){const d=n("file-upload-icon");return e(),t(p,null,[i("input",{type:"file",name:"File upload",class:"hidden",ref:"fileUpload",multiple:"",onChange:s[1]||(s[1]=(...e)=>c.uploadFilesFromInput&&c.uploadFilesFromInput(...e))},null,544),i("div",{class:["drop-area",r.isDraggingOver?"dragging-over":""],onDrop:s[2]||(s[2]=h(((...e)=>c.uploadDroppedFiles&&c.uploadDroppedFiles(...e)),["prevent"])),onDragover:s[3]||(s[3]=h((()=>{}),["prevent"])),onDragenter:s[4]||(s[4]=(...e)=>c.onDragEnter&&c.onDragEnter(...e)),onDragleave:s[5]||(s[5]=(...e)=>c.onDragLeave&&c.onDragLeave(...e)),onClick:s[6]||(s[6]=(...e)=>c.openFileUploadWindow&&c.openFileUploadWindow(...e))},[i("span",Me,[i(d),Ve])],34)],64)};const ze={name:"CroppingContainer",components:{CroppingElement:ke,DropArea:De},data:()=>({files:re.state.uploadedFiles})},Le={class:"cropping-container"};ze.render=function(a,s,o,l,r,c){const h=n("cropping-element"),u=n("drop-area");return e(),t("div",Le,[(e(!0),t(p,null,d(r.files,((a,i)=>(e(),t(h,{key:i,file:a},null,8,["file"])))),128)),i(u)])};const Oe={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},Ue=i("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),He=i("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"},null,-1);const Re={name:"CropButton",components:{CropIcon:function(a,i){return e(),t("svg",Oe,[Ue,He])}},data:()=>({sideBarState:y.state}),methods:{onClick(){ce.open()}}},je=i("span",{class:"crop-button-label"},"Crop images",-1);Re.render=function(a,s,o,l,r,c){const p=n("crop-icon");return e(),t("div",{class:["crop-button",r.sideBarState.isActive?"side-bar-opened":""]},[i("button",{class:"button",onClick:s[1]||(s[1]=(...e)=>c.onClick&&c.onClick(...e))},[je,i(p)])],2)};const Ee={name:"DownloadItem",props:{src:String,name:String,width:Number,height:Number}},Te={class:"download-item"},$e={class:"download-image-container"},_e={class:"download-label"},qe={class:"download-name"},Pe={class:"download-size"};Ee.render=function(a,n,s,l,r,c){return e(),t("div",Te,[i("div",$e,[i("img",{src:s.src,alt:s.name},null,8,["src","alt"])]),i("div",_e,[i("span",qe,o(s.name),1),i("span",Pe,o(s.width)+" x "+o(s.height),1)])])};m.use([v]);const We={name:"DownloadElement",components:{DownloadItem:Ee,ArrowIcon:be,Swiper:w,SwiperSlide:f},props:{images:Array},data:()=>({swiperBreakpoints:{640:{slidesPerView:2},992:{slidesPerView:3}},swiperNavigation:{prevEl:".navigation-prev",nextEl:".navigation-next"}}),methods:{getSrcFromBlob:e=>URL.createObjectURL(e)}},Je={class:"download-element"},Ge={class:"swiper-controls"},Ke={class:"navigation-prev"},Qe={class:"navigation-next"};We.render=function(a,s,o,l,r,c){const h=n("arrow-icon"),g=n("download-item"),m=n("swiper-slide"),v=n("swiper");return e(),t("div",Je,[i(v,{"slides-per-view":1,"space-between":32,breakpoints:r.swiperBreakpoints,"allow-touch-move":!1,navigation:r.swiperNavigation},{default:u((()=>[i("div",Ge,[i("div",Ke,[i(h)]),i("div",Qe,[i(h)])]),(e(!0),t(p,null,d(o.images,((a,n)=>(e(),t(m,{key:n},{default:u((()=>[i(g,{src:c.getSrcFromBlob(a.blob),name:a.name,width:a.width,height:a.height},null,8,["src","name","width","height"])])),_:2},1024)))),128))])),_:1},8,["breakpoints","navigation"])])};const Xe={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},Ye=i("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ze=i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1);const et={name:"DownloadModal",components:{CustomButton:P,RefreshIcon:function(a,i){return e(),t("svg",Xe,[Ye,Ze])},DownloadElement:We},data:()=>({downloadModalState:ce.state,croppingState:re.state,downloadText:"Download"}),computed:{filteredCroppedImages(){let e=this.croppingState.croppedImages;console.log(e);for(let t in e){let a=e[t].filter((e=>null!=e)).sort(((e,t)=>e.width-t.width));e[t]=a}return e}},methods:{closeModal(){ce.close(),re.resetCroppedImages()},onDownloadClick(){this.saveImages()},saveImages(){let e=this.$refs.loader,t=new k,a=this.croppingState.croppedImages;this.downloadText="Downloading",e.classList.add("show");for(let i of a)for(let e of i){let a=e.name+".jpg";t.file(a,e.blob)}t.generateAsync({type:"blob"}).then((t=>{e.classList.remove("show"),this.downloadText="Download",S.saveAs(t,"dropncrop.zip")}))}}},tt={key:0,class:"download-modal"},at={class:"download-modal-wrapper"},it=i("div",{class:"modal-header"},[i("span",{class:"modal-headline"},"Preview")],-1),nt={class:"modal-content"},st={class:"modal-buttons"};et.render=function(a,l,r,c,h,u){const g=n("download-element"),m=n("custom-button"),v=n("refresh-icon");return h.downloadModalState.isActive?(e(),t("div",tt,[i("div",at,[it,i("div",nt,[(e(!0),t(p,null,d(u.filteredCroppedImages,((a,i)=>(e(),t(g,{key:i,images:a},null,8,["images"])))),128))]),i("div",st,[i(m,{type:"button",label:"Cancel",class:"secondary",onClick:u.closeModal},null,8,["onClick"]),i("button",{class:"button download",type:"button",onClick:l[1]||(l[1]=(...e)=>u.onDownloadClick&&u.onDownloadClick(...e))},[s(o(h.downloadText)+" ",1),i(v,{ref:"loader"},null,512)])])])])):b("",!0)};const ot={name:"AppMain",components:{CroppingContainer:ze,CropButton:Re,DownloadModal:et},data:()=>({sideBarState:y.state})};ot.render=function(a,s,o,l,r,c){const p=n("cropping-container"),d=n("crop-button"),h=n("download-modal");return e(),t("main",{class:r.sideBarState.isActive?"app-main side-bar-opened":"app-main"},[i(p),i(d),i(h)],2)};const lt={name:"App",components:{AppTopBar:D,AppSideBar:ne,AppMain:ot},created(){R.loadFromLocalStorage()}};lt.render=function(a,s,o,l,r,c){const d=n("app-main"),h=n("app-top-bar"),u=n("app-side-bar");return e(),t(p,null,[i(d),i(h),i(u)],64)};x(lt).mount("#app");
